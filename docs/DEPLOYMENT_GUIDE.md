# ðŸš€ Ð ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸ÑŽ Tel Call

ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ñ€ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸ÑŽ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Tel Call Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ (Selectel, VPS, Ð¸Ð»Ð¸ Ð»ÑŽÐ±Ð¾Ð¹ Ð´Ñ€ÑƒÐ³Ð¾Ð¹).

## ðŸ“‹ Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ

- [Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ](#Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ)
- [Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚](#Ð±Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹-ÑÑ‚Ð°Ñ€Ñ‚)
- [Ð ÑƒÑ‡Ð½Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°](#Ñ€ÑƒÑ‡Ð½Ð°Ñ-ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°)
- [ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° DNS](#Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°-dns)
- [ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° SSL](#Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°-ssl)
- [ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹](#Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°-Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹)
- [Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼](#Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ-Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼)

## âœ… Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ

### Ð¡ÐµÑ€Ð²ÐµÑ€

- **ÐžÐ¡**: Ubuntu 20.04+ / Debian 11+
- **RAM**: ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 2 GB
- **CPU**: 1+ ÑÐ´Ñ€Ð¾
- **Ð”Ð¸ÑÐº**: ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 10 GB
- **ÐŸÑ€Ð°Ð²Ð°**: root Ð¸Ð»Ð¸ sudo Ð´Ð¾ÑÑ‚ÑƒÐ¿

### ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð½Ð¾Ðµ Ð¾Ð±ÐµÑÐ¿ÐµÑ‡ÐµÐ½Ð¸Ðµ

- Docker 20.10+
- Docker Compose 2.0+
- Git 2.0+

### Ð”Ð¾ÑÑ‚ÑƒÐ¿

- SSH Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ
- Ð—Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð¾Ð¼ÐµÐ½Ñ‹ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: api.callwith.ru, app.callwith.ru)
- Telegram Bot Token (Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¾Ñ‚ [@BotFather](https://t.me/BotFather))

## ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)

### Ð¨Ð°Ð³ 1: ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÐµÑÑŒ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ

```bash
ssh root@YOUR_SERVER_IP
```

### Ð¨Ð°Ð³ 2: Ð¡ÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ Ð¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸

```bash
# ÐšÐ»Ð¾Ð½Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹
git clone https://github.com/Rodion4365/Tel_call.git /tmp/tel_call
cd /tmp/tel_call

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÑƒÑŽ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ
sudo ./scripts/setup.sh
```

Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸:
- âœ… Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ Docker Ð¸ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸
- âœ… Ð¡Ð¾Ð·Ð´Ð°ÑÑ‚ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð¾Ð²
- âœ… Ð¡Ð¾Ð·Ð´Ð°ÑÑ‚ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹
- âœ… Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹

### Ð¨Ð°Ð³ 3: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

```bash
cd /opt/app/projects/tel_call

# ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ backend/.env
nano backend/.env
```

**ÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:**

```bash
# Telegram Bot
BOT_TOKEN=Ð²Ð°Ñˆ_Ñ‚Ð¾ÐºÐµÐ½_Ð¾Ñ‚_BotFather
BOT_USERNAME=Ð²Ð°Ñˆ_Ð±Ð¾Ñ‚_Ð±ÐµÐ·_@

# Security
SECRET_KEY=ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ_ÐºÐ¾Ð¼Ð°Ð½Ð´Ð¾Ð¹_Ð½Ð¸Ð¶Ðµ
```

**Ð“ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ SECRET_KEY:**

```bash
openssl rand -hex 32
```

ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ `infra/.env`:

```bash
nano infra/.env
```

**Ð£ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð²Ð°ÑˆÐ¸ Ð´Ð¾Ð¼ÐµÐ½Ñ‹:**

```bash
BACKEND_HOST=api.callwith.ru
FRONTEND_HOST=app.callwith.ru
```

### Ð¨Ð°Ð³ 4: ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐµÑ€Ð²Ð¸ÑÑ‹

```bash
cd infra
docker compose restart
```

### Ð¨Ð°Ð³ 5: ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‡ÐµÑ€ÐµÐ· localhost
curl -H "Host: api.callwith.ru" http://127.0.0.1/health

# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ:
# {"status":"ok"}
```

**Ð“Ð¾Ñ‚Ð¾Ð²Ð¾!** ðŸŽ‰

ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ðº [ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐµ DNS](#Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°-dns) Ð´Ð»Ñ Ð¿Ð¾Ð»Ð½Ð¾Ð³Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ°.

---

## ðŸ› ï¸ Ð ÑƒÑ‡Ð½Ð°Ñ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð±Ð¾Ð»ÑŒÑˆÐµ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ñ Ð½Ð°Ð´ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð¼ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸.

### 1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹

```bash
# ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
apt-get update && apt-get upgrade -y

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Docker
curl -fsSL https://get.docker.com | sh
systemctl enable docker
systemctl start docker

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Docker Compose
apt-get install docker-compose-plugin -y

# Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Git
apt-get install git -y
```

### 2. ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ

```bash
mkdir -p /opt/app/projects
cd /opt/app/projects
git clone https://github.com/Rodion4365/Tel_call.git tel_call
cd tel_call
```

### 3. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ñ… Ñ„Ð°Ð¹Ð»Ð¾Ð²

**backend/.env:**

```bash
cat > backend/.env <<'EOF'
# Application
APP_NAME=Tel Call Backend
DEBUG=false

# Database
DATABASE_URL=postgresql+asyncpg://app:apppassword@postgres:5432/app

# Telegram Bot (Ð—ÐÐŸÐžÐ›ÐÐ˜Ð¢Ð•!)
BOT_TOKEN=YOUR_BOT_TOKEN_HERE
BOT_USERNAME=YOUR_BOT_USERNAME_HERE
BOT_WEBHOOK_URL=https://api.callwith.ru/api/telegram/webhook

# Security (Ð—ÐÐŸÐžÐ›ÐÐ˜Ð¢Ð•!)
SECRET_KEY=YOUR_SECRET_KEY_HERE_MIN_32_CHARS
ACCESS_TOKEN_EXPIRE_MINUTES=15

# CORS
CORS_ALLOW_ORIGINS=https://app.callwith.ru

# WebRTC
STUN_SERVERS=stun:stun.l.google.com:19302
TURN_SERVERS=
EOF
```

**infra/.env:**

```bash
cat > infra/.env <<'EOF'
# Hostnames
BACKEND_HOST=api.callwith.ru
FRONTEND_HOST=app.callwith.ru

# PostgreSQL
POSTGRES_USER=app
POSTGRES_PASSWORD=apppassword
POSTGRES_DB=app

# WebRTC
STUN_SERVERS=stun:stun.l.google.com:19302
TURN_SERVERS=

# TURN Server
TURN_REALM=callwith.ru
TURN_SERVER_NAME=turn.callwith.ru
TURN_USERNAME=telcall
TURN_PASSWORD=change_me_in_production
TURN_EXTRA_OPTS=
EOF
```

### 4. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹ Ð´Ð»Ñ Traefik

```bash
mkdir -p infra/traefik/dynamic
mkdir -p infra/traefik/certs
```

### 5. Ð—Ð°Ð¿ÑƒÑÐº ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²

```bash
cd infra
docker compose up -d --build
```

### 6. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð²

```bash
docker compose logs -f
```

---

## ðŸŒ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° DNS

Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ A Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð² DNS Ð¿Ñ€Ð¾Ð²Ð°Ð¹Ð´ÐµÑ€Ðµ:

| Ð¢Ð¸Ð¿ | Ð˜Ð¼Ñ | Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ |
|-----|-----|----------|
| A | api.callwith.ru | IP_Ð²Ð°ÑˆÐµÐ³Ð¾_ÑÐµÑ€Ð²ÐµÑ€Ð° |
| A | app.callwith.ru | IP_Ð²Ð°ÑˆÐµÐ³Ð¾_ÑÐµÑ€Ð²ÐµÑ€Ð° |

**ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° DNS:**

```bash
# Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ IP Ð²Ð°ÑˆÐµÐ³Ð¾ ÑÐµÑ€Ð²ÐµÑ€Ð°
dig +short api.callwith.ru
dig +short app.callwith.ru
```

**Ð˜Ð»Ð¸ Ñ‡ÐµÑ€ÐµÐ· ping:**

```bash
ping -c 1 api.callwith.ru
```

---

## ðŸ”’ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° SSL (Let's Encrypt)

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 1: ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)

Traefik Ð¼Ð¾Ð¶ÐµÑ‚ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð°Ñ‚ÑŒ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹ Ð¾Ñ‚ Let's Encrypt.

**ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ `infra/docker-compose.yml`:**

```yaml
reverse-proxy:
  image: traefik:v2.10
  command:
    # ... ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ ...
    - --certificatesresolvers.letsencrypt.acme.email=your-email@example.com
    - --certificatesresolvers.letsencrypt.acme.storage=/letsencrypt/acme.json
    - --certificatesresolvers.letsencrypt.acme.httpchallenge.entrypoint=web
  volumes:
    # ... ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ðµ volumes ...
    - ./letsencrypt:/letsencrypt
```

**ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ labels Ð´Ð»Ñ backend:**

```yaml
backend:
  labels:
    - traefik.http.routers.backend.tls.certresolver=letsencrypt
```

**Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ:**

```bash
mkdir -p infra/letsencrypt
chmod 600 infra/letsencrypt
```

**ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ:**

```bash
docker compose restart
```

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 2: Ð ÑƒÑ‡Ð½Ð¾Ð¹

Ð•ÑÐ»Ð¸ Ñƒ Ð²Ð°Ñ ÑƒÐ¶Ðµ ÐµÑÑ‚ÑŒ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹:

```bash
# Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹
cp your-cert.crt infra/traefik/certs/
cp your-key.key infra/traefik/certs/

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ Traefik
cat > infra/traefik/dynamic/certs.yml <<'EOF'
tls:
  certificates:
    - certFile: /certs/your-cert.crt
      keyFile: /certs/your-key.key
EOF

docker compose restart
```

---

## âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹

### 1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²

```bash
cd /opt/app/projects/tel_call/infra
docker compose ps
```

Ð’ÑÐµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ Ð² ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ð¸ `Up`.

### 2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° API

```bash
# Ð›Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾
curl -H "Host: api.callwith.ru" http://127.0.0.1/health

# Ð§ÐµÑ€ÐµÐ· Ð´Ð¾Ð¼ÐµÐ½ (Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ DNS)
curl https://api.callwith.ru/health

# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ:
{"status":"ok"}
```

### 3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Traefik Dashboard

ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ:
```
http://YOUR_SERVER_IP:8080/dashboard/
```

Ð’Ñ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ ÑƒÐ²Ð¸Ð´ÐµÑ‚ÑŒ Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ñ‹:
- `backend` â†’ `api.callwith.ru`
- `frontend` â†’ `app.callwith.ru`

### 4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Telegram Webhook

```bash
cd /opt/app/projects/tel_call
docker compose run --rm backend python update_webhook.py
```

Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸:
```
âœ… Webhook ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½!
```

### 5. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð²

```bash
# Ð’ÑÐµ Ð»Ð¾Ð³Ð¸
docker compose logs -f

# Ð¢Ð¾Ð»ÑŒÐºÐ¾ backend
docker compose logs -f backend

# Ð¢Ð¾Ð»ÑŒÐºÐ¾ Traefik
docker compose logs -f reverse-proxy
```

---

## ðŸ› Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: 404 Not Found

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼:**
```bash
curl -H "Host: api.callwith.ru" http://127.0.0.1/health
404 page not found
```

**ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð°:** Traefik Ð½Ðµ Ð²Ð¸Ð´Ð¸Ñ‚ backend ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€.

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**

1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾ backend Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½:
   ```bash
   docker compose ps backend
   ```

2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÐµÑ‚ÑŒ:
   ```bash
   docker network inspect infra_web
   ```
   Backend Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð² ÑÐ¿Ð¸ÑÐºÐµ.

3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ labels:
   ```bash
   docker inspect infra-backend-1 | grep traefik
   ```

4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Traefik dashboard:
   http://YOUR_SERVER_IP:8080/dashboard/

5. ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ:
   ```bash
   docker compose down
   docker compose up -d
   ```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Backend Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼:**
```bash
docker compose ps
# backend: Exit 1
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**

1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð»Ð¾Ð³Ð¸:
   ```bash
   docker compose logs backend
   ```

2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ .env Ñ„Ð°Ð¹Ð»Ñ‹:
   ```bash
   cat backend/.env
   cat infra/.env
   ```

3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…:
   ```bash
   docker compose exec postgres psql -U app -d app -c "SELECT 1;"
   ```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: SSL Ð¾ÑˆÐ¸Ð±ÐºÐ¸

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼:**
```
SSL: CERTIFICATE_VERIFY_FAILED
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**

1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ DNS:
   ```bash
   dig +short api.callwith.ru
   ```

2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹:
   ```bash
   ls -la infra/letsencrypt/
   ```

3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Traefik Ð»Ð¾Ð³Ð¸:
   ```bash
   docker compose logs reverse-proxy | grep acme
   ```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Docker API Ð²ÐµÑ€ÑÐ¸Ñ

**Ð¡Ð¸Ð¼Ð¿Ñ‚Ð¾Ð¼:**
```
client version 1.24 is too old. Minimum supported API version is 1.44
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:**

1. ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ docker.socket:
   ```bash
   systemctl stop docker.socket
   systemctl disable docker.socket
   ```

2. ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Docker:
   ```bash
   systemctl restart docker
   ```

3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð²ÐµÑ€ÑÐ¸ÑŽ API:
   ```bash
   docker version
   ```

---

## ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ

```bash
cd /opt/app/projects/tel_call
sudo ./scripts/deploy.sh main
```

### Ð ÑƒÑ‡Ð½Ð¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ

```bash
cd /opt/app/projects/tel_call
git pull origin main
cd infra
docker compose down
docker compose up -d --build
```

---

## ðŸ“Š ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³

### ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

```bash
# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð²ÑÐµÑ… ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
docker compose ps

# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²
docker stats

# Ð›Ð¾Ð³Ð¸ Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸
docker compose logs -f

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº ÑÐµÑ€Ð²Ð¸ÑÐ°
docker compose restart backend

# ÐŸÐ¾Ð»Ð½Ð°Ñ Ð¿ÐµÑ€ÐµÑÐ±Ð¾Ñ€ÐºÐ°
docker compose down
docker compose build --no-cache
docker compose up -d
```

### Traefik Dashboard

Ð’ÑÐµÐ³Ð´Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð½Ð° Ð¿Ð¾Ñ€Ñ‚Ñƒ 8080:
```
http://YOUR_SERVER_IP:8080/dashboard/
```

---

## ðŸ“š Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ€ÐµÑÑƒÑ€ÑÑ‹

- [CI/CD Setup Guide](./CICD_SETUP.md)
- [SELECTEL Setup Guide](../SELECTEL_SETUP.md)
- [Project Structure](../PROJECT_STRUCTURE_RU.md)
- [Telegram Bot Setup](../backend/TELEGRAM_BOT_SETUP.md)

---

**Ð’Ð¾Ð¿Ñ€Ð¾ÑÑ‹?** Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ [issue Ð½Ð° GitHub](https://github.com/Rodion4365/Tel_call/issues).
